EOI EQU 20H
IMR EQU 21H
INT_1 EQU 25H
TIMER EQU 10H

N_CLK EQU 10

ORG 40
IP_CLK DW DIR_CLK

ORG 1000H 

MIN_D DB 35H ; DECENA MINUTOS 
MIN_U DB 38H ; UNIDAD MINUTOS 
DP DB ":"
SEG_D DB 35H ; DECENA SEGUNDOS 
SEG_U DB 30H ; UNIDAD SEGUNDOS
FIN DB ?



ORG 3000H
DIR_CLK: PUSH AX
INC SEG_D
CMP SEG_D, 36H
JNZ IMPRIMIR

MOV SEG_D, 30H
INC MIN_U
CMP MIN_U, 3AH
JNZ IMPRIMIR

MOV MIN_U, 30H
INC MIN_D
CMP MIN_D, 36H
JNZ IMPRIMIR

MOV MIN_D, 30H

IMPRIMIR: INT 7
MOV AL, 0
OUT TIMER, AL

MOV AL, EOI
OUT EOI, AL

POP AX
IRET


ORG 2000H
CLI

MOV AL,  0FDH; 1111 1101B
OUT IMR, AL; ENMASCARAMOS EL IMR

MOV AL, N_CLK ; AL = 10
OUT INT_1, AL ; INT_1 = 10

MOV AL, 0
OUT TIMER, AL; CONTADOR = 0

MOV AL, 10
OUT TIMER+1, AL; COMPARADOR = 10

MOV BX, OFFSET MIN_D
MOV AL, OFFSET FIN - OFFSET MIN_D

STI

LAZO: JMP LAZO

HLT
END