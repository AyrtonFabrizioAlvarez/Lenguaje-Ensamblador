HS_DATO EQU 40H
HS_ESTADO EQU 41H


ORG 1000H
LONGITUD DB 5
CADENA DB ?

ORG 2000H

IN AL, HS_ESTADO
AND AL, 7FH       ; FUERZO A 0 EL BIT MAS SIGNIFICATIVO PARA INDICAR POOLING
OUT HS_ESTADO, AL

MOV BX, OFFSET CADENA ; ME POSICIONO AL PRINCIPIO DE LA CADENA
MOV CL, LONGITUD      ; USO CL COMO CONTADOR DE LA CANTIDAD DE CARACTERES

LEER: INT 6
INC BX
DEC CL
JNZ LEER

MOV BX, OFFSET CADENA
MOV CL, LONGITUD

POLL1: IN AL, HS_ESTADO ; POOLING PARA MOSTRARLO COMO SE INGRESO
AND AL, 01H
JNZ POLL1


MOV AL, [BX]     ; PARA IMPRIMIR LA CADENA AL DERECHO
OUT HS_DATO, AL  ; ENVIO EL CARACTER A LA IMPRESIORA
INC BX           ; AVANZO AL PROXIMO CARACTER DEL STRING
DEC CL           ; DECREMENTO EL CONTADOR DE TOTAL DE CARACTERES
JNZ POLL1        ; SI QUEDAN CARACTERES VUELVO AL POOLING(1)

DEC BX           ; COMO AL MOSTRARLO AL DERECHO QUEDE EN EL FINAL, SOLO DECREMENTO
MOV CL, LONGITUD ; VUELVO A USAR CL COMO CONTADOR

POLL2: IN AL, HS_ESTADO ; POOLING PARA MOSTRARLO DE MANERA INVERSA
AND AL, 01H
JNZ POLL2

MOV AL, [BX]    ; PARA IMPRIMIR LA CADENA DE MANERA INVERSA
OUT HS_DATO, AL ; ENVIO EL CARACTER A LA IMPRESORA
DEC BX          ; DECREMENTO BX PARA PASAR AL CARACTER (ANTERIOR) DEL STRING
DEC CL          ; DECREMENTO EL CONTADOR DE TOTAL DE CARACTERES
JNZ POLL2       ; SI QUEDAN CARACTERES VUELVO AL POOLING(2)

HLT
END