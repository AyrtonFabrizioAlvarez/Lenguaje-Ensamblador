PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 1000H
CAR DB "A"


ORG 2000H

; CA (ENTRADA/SALIDA) (STROBE EN SALIDA - BUSY EN ENTRADA)
MOV AL, 0FDH ; 11111101B
OUT CA, AL

;CB (SALIDA)
MOV AL, 0
OUT CB, AL


; POLL
POLL: IN AL, PA
AND AL, 1
JNZ POLL

; CARGO DATO (PB)
MOV AL, CAR
OUT PB, AL

; STROBE EN 1 (AVISO A LA IMPRESORA QUE ESTA EL DATO DISPONIBLE)
IN AL, PA
OR AL, 2
OUT PA, AL


; STROBE EN 0
IN AL, PA
AND AL, 0FDH (1111 1101)
OUT PA, AL

HLT
END